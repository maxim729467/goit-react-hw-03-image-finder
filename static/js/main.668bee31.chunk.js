(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={Placeholder:"Placeholder_Placeholder__Ru_6O",gradient:"Placeholder_gradient__30JFj",title:"Placeholder_title__1DpbX"}},13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3f5xG",img:"ImageGalleryItem_img__3C8sv"}},16:function(e,t,a){e.exports={Container:"Container_Container__pd2-L"}},17:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2_VRJ"}},18:function(e,t,a){e.exports={button:"Button_button__gtRP7"}},24:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),s=(a(24),a(14)),i=a(4),l=a(5),u=a(7),h=a(6),d=a(15),m=a.n(d),b=(a(45),a(10)),p=(a(46),a(16)),j=a.n(p),g=a(1);function f(e){var t=e.children;return Object(g.jsx)("div",{className:j.a.Container,children:t})}var v=a(12),_=a.n(v);function O(e){var t=e.text;return Object(g.jsx)("section",{className:_.a.Placeholder,children:Object(g.jsx)("h1",{className:_.a.title,children:t})})}var x=a(8),y=a.n(x),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={value:""},e.onSubmit=function(t){t.preventDefault(),""!==e.state.value.trim()&&(e.props.setTopic(e.state.value),e.setState({value:""}))},e.onChange=function(t){e.setState({value:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.value;return Object(g.jsx)("header",{className:y.a.Searchbar,children:Object(g.jsxs)("form",{className:y.a.SearchForm,onSubmit:this.onSubmit,children:[Object(g.jsx)("button",{type:"submit",className:y.a.button,children:Object(g.jsx)("span",{className:y.a.buttonLabel,children:"Search"})}),Object(g.jsx)("input",{onChange:this.onChange,className:y.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e})]})})}}]),a}(n.Component),S=a(17),C=a.n(S),I=a(13),k=a.n(I);function M(e){var t=e.images,a=e.onImgClick;return t.map((function(e){var t=e.id,n=e.webformatURL,o=e.tags;return Object(g.jsx)("li",{className:k.a.ImageGalleryItem,onClick:function(){return a(t)},children:Object(g.jsx)("img",{className:k.a.img,src:n,alt:o})},t)}))}function N(e){var t=e.images,a=e.onImgClick;return Object(g.jsx)("ul",{className:C.a.ImageGallery,children:Object(g.jsx)(M,{images:t,onImgClick:a})})}var P=a(18),G=a.n(P);function E(e){var t=e.onClick;return Object(g.jsx)("button",{type:"button",onClick:function(){return t()},className:G.a.button,children:"Load more"})}var F=a(9),L=a.n(F),T=a(19),B=document.querySelector("#modal-root"),D=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).closeModalbyEsc=function(t){"Escape"===t.code&&e.props.showModal()},e.closeModalbyClick=function(t){t.currentTarget===t.target&&e.props.showModal()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.closeModalbyEsc)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.closeModalbyEsc)}},{key:"render",value:function(){var e=this.props.showModal;return Object(r.createPortal)(Object(g.jsxs)("div",{className:L.a.backdrop,onClick:this.closeModalbyClick,children:[Object(g.jsx)("button",{type:"button",onClick:function(){return e()},className:L.a.button,children:Object(g.jsx)(T.a,{className:L.a.icon})}),Object(g.jsx)("div",{className:L.a.modal,children:this.props.children})]}),B)}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={status:"idle",topic:"",loader:!1,page:1,images:[],showModal:!1,modalContent:null},e.setTopic=function(t){e.setState((function(e){if(e.topic!==t.toLowerCase())return{topic:t.toLowerCase(),page:1};b.b.dark("The same request! Try something another :)",{toastId:"customId"})}))},e.showModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.resetImages=function(){e.setState({images:[]})},e.setPage=function(){e.setState((function(e){return{page:e.page+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.onImgClick=function(t){var a=e.state.images.find((function(e){return e.id===t}));e.setState({modalContent:a}),e.showModal()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,o=n.page,r=n.topic;r===t.topic&&o===t.page||(1===o&&this.resetImages(),this.setState({loader:!0}),function(e,t){return fetch("https://pixabay.com/api/?key=".concat("21273112-45be21eebf5785c737b42a518","&q=").concat(t,"&image_type=photo&orientation=horizontal&page=").concat(e,"&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Some server issue seems to have occured. Please try again"))}))}(o,r).then((function(e){e.hits.length<12&&b.b.warn("No more images to load",{toastId:"anotherCustomId"}),a.setState((function(t){return{images:[].concat(Object(s.a)(t.images),Object(s.a)(e.hits)),status:"resolved"}}))})).catch((function(){return a.setState({status:"rejected"})})).finally((function(){return a.setState({loader:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.showModal,n=e.images,o=e.loader,r=e.modalContent;return Object(g.jsxs)(f,{children:[Object(g.jsx)(w,{setTopic:this.setTopic}),"idle"===t?Object(g.jsx)(O,{text:"Use the search bar above if you are looking to get an awesome wallpaper"}):null,"resolved"===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N,{images:n,onImgClick:this.onImgClick}),Object(g.jsx)(E,{onClick:this.setPage})]}):null,o&&Object(g.jsx)(m.a,{className:"Loader",type:"Grid",color:"#9900cc",height:180,width:180}),"rejected"===t?Object(g.jsx)(O,{text:"Some error occured while fetching requested images"}):null,a&&Object(g.jsx)(D,{showModal:this.showModal,children:Object(g.jsx)("img",{src:r.largeImageURL,alt:r.tags})}),Object(g.jsx)(b.a,{})]})}}]),a}(n.Component);c.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(R,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__1IER1",SearchForm:"SearchBar_SearchForm__16_ND",button:"SearchBar_button__1csV9",SearchFormInput:"SearchBar_SearchFormInput__2YnpK"}},9:function(e,t,a){e.exports={backdrop:"Modal_backdrop__F3TbT",modal:"Modal_modal__1DOSN",button:"Modal_button__2Uwlx",icon:"Modal_icon__2S1p6"}}},[[48,1,2]]]);
//# sourceMappingURL=main.668bee31.chunk.js.map